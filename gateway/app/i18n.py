from __future__ import annotations

from gateway.app.config import get_settings


TRANSLATIONS = {
    "en": {
        "app_title": "ShortVideo V1 · Pipeline Lab",
        "app_subtitle": "Bilingual admin for the V1 shortvideo pipeline.",
        "task_board": "Task Board",
        "task_workbench": "Task Workbench",
        "new_suitcase_task": "New Suitcase Task",
        "task": "Task",
        "task_id": "Task ID",
        "platform": "Platform",
        "source": "Source",
        "title": "Title",
        "category": "Category",
        "category_suitcase": "Suitcase",
        "category_beauty": "Beauty",
        "category_other": "Other",
        "lang": "Language",
        "status": "Status",
        "status_ready": "Ready",
        "status_processing": "Processing",
        "status_pending": "Pending",
        "status_error": "Error",
        "status_unknown": "Unknown",
        "created": "Created",
        "pack": "Pack",
        "detail": "Detail",
        "downloads": "Downloads",
        "download": "Download",
        "open": "Open",
        "json": "JSON",
        "processing": "Processing",
        "ready": "Ready",
        "error": "Error",
        "pending": "Pending",
        "no_tasks": "No tasks yet",
        "task_count": "Loaded {count} tasks.",
        "legend": "Legend",
        "re_run_subtitles": "Re-run subtitles",
        "re_run_dub": "Re-run dub",
        "re_run_pack": "Re-run pack",
        "log": "Log",
        "step1": "Step 1",
        "step2": "Step 2",
        "step3": "Step 3",
        "step4": "Step 4",
        "action": "Action",
        "link": "Video Link",
        "generate_task_id": "Generate Task ID",
        "generate_from_link": "Generate from link",
        "reset": "Reset",
        "create_task": "Create task",
        "tasks": "Tasks",
        "preview": "Preview",
        "raw_video": "Raw Video",
        "subtitles": "Subtitles",
        "origin_subtitles": "Original subtitles",
        "translated_subtitles": "Translated subtitles",
        "dub_audio": "Dub Audio",
        "pack_file": "CapCut Pack",
        "voice_id": "Voice ID",
        "execute": "Execute",
        "response": "Response",
        "output": "Output",
        "settings": "Settings",
        "run_full_pipeline": "Run full pipeline",
        "parse_download": "Parse & Download",
        "transcribe_translate": "Transcribe & Translate",
        "burmese_voiceover": "Burmese Voiceover",
        "pack_capcut": "Pack for CapCut",
        "workspace": "Workspace",
        "asr_backend_label": "ASR backend",
        "subtitles_backend_label": "Subtitles backend",
        "gemini_model_label": "Gemini model",
        "whisper_model_label": "Whisper model",
        "gpt_model_label": "GPT model",
    },
    "my": {
        "app_title": "ShortVideo V1 · Pipeline Lab",
        "app_subtitle": "V1 pipeline အတွက် ဘာသာနှစ်ခုအုပ်ချုပ်ရေး",
        "task_board": "အလုပ်စာရင်းဘုတ်",
        "task_workbench": "အလုပ်လုပ်ခန်း",
        "new_suitcase_task": "ခရီးဆောင်သေတ္တာအလုပ်သစ်",
        "task": "အလုပ်",
        "task_id": "အလုပ် ID",
        "platform": "ပလက်ဖောင်း",
        "source": "အရင်းအမြစ်",
        "title": "ခေါင်းစဉ်",
        "category": "အမျိုးအစား",
        "category_suitcase": "ခရီးဆောင်အိတ်",
        "category_beauty": "အလှအပ",
        "category_other": "အခြား",
        "lang": "ဘာသာစကား",
        "status": "အခြေအနေ",
        "status_ready": "အဆင်သင့်",
        "status_processing": "လုပ်ဆောင်နေဆဲ",
        "status_pending": "စောင့်ဆိုင်းနေ",
        "status_error": "အမှား",
        "status_unknown": "မသိ",
        "created": "ဖန်တီးချိန်",
        "pack": "ကပ်ကတ်ပက်",
        "detail": "အသေးစိတ်",
        "downloads": "ဒေါင်းလုဒ်များ",
        "download": "ဒေါင်းလုဒ်",
        "open": "ဖွင့်ရန်",
        "json": "JSON",
        "processing": "လုပ်ဆောင်နေဆဲ",
        "ready": "ပြီးပြည့်စုံ",
        "error": "အမှား",
        "pending": "စောင့်ဆိုင်းနေ",
        "no_tasks": "လုပ်ဆောင်ရန် မရှိသေးပါ",
        "task_count": "လုပ်ဆောင်မှု {count} ခုကို တင်ပြီးပါပြီ။",
        "legend": "အခြေအနေ အညွှန်း",
        "re_run_subtitles": "စာတန်းထိုး ပြန်လုပ်",
        "re_run_dub": "အသံ ပြန်လုပ်",
        "re_run_pack": "ပက် ပြန်လုပ်",
        "log": "မှတ်တမ်း",
        "step1": "အဆင့် ၁",
        "step2": "အဆင့် ၂",
        "step3": "အဆင့် ၃",
        "step4": "အဆင့် ၄",
        "action": "လုပ်ဆောင်ချက်",
        "link": "ဗီဒီယိုလင့်",
        "generate_task_id": "Task ID ဖန်တီးရန်",
        "generate_from_link": "လင့်မှ ဖန်တီးရန်",
        "reset": "ပြန်သတ်မှတ်",
        "create_task": "အလုပ် ဖန်တီးရန်",
        "tasks": "အလုပ်များ",
        "preview": "အကြိုကြည့်ရန်",
        "raw_video": "မူလဗီဒီယို",
        "subtitles": "စာတန်းထိုး",
        "origin_subtitles": "မူလစာတန်းထိုး",
        "translated_subtitles": "ဘာသာပြန် စာတန်းထိုး",
        "dub_audio": "အသံဖိုင်",
        "pack_file": "CapCut ပက်",
        "voice_id": "အသံ ID",
        "execute": "အလုပ်လုပ်ရန်",
        "response": "ပြန်လာသည့် အချက်အလက်",
        "output": "ထုတ်ယူချက်",
        "settings": "ဆက်တင်များ",
        "run_full_pipeline": "Pipeline အပြည့် အလုပ်လုပ်ရန်",
        "parse_download": "ခွဲခြမ်း & ဒေါင်းလုဒ်",
        "transcribe_translate": "စာသားထုတ် & ဘာသာပြန်",
        "burmese_voiceover": "မြန်မာအသံ",
        "pack_capcut": "CapCut အတွက် ပက်",
        "workspace": "အလုပ်နေရာ",
        "asr_backend_label": "ASR နောက်ခံ",
        "subtitles_backend_label": "စာတန်းထိုး နောက်ခံ",
        "gemini_model_label": "Gemini မော်ဒယ်",
        "whisper_model_label": "Whisper မော်ဒယ်",
        "gpt_model_label": "GPT မော်ဒယ်",
    },
}


def t(key: str, lang: str, fallback_lang: str = "en") -> str:
    if lang in TRANSLATIONS and key in TRANSLATIONS[lang]:
        return TRANSLATIONS[lang][key]
    if fallback_lang in TRANSLATIONS and key in TRANSLATIONS[fallback_lang]:
        return TRANSLATIONS[fallback_lang][key]
    return key


def t_primary(key: str) -> str:
    settings = get_settings()
    return t(key, settings.ui_primary_lang)


def t_secondary(key: str) -> str:
    settings = get_settings()
    return t(key, settings.ui_secondary_lang, fallback_lang=settings.ui_primary_lang)


def t_bi(key: str) -> dict[str, str]:
    return {
        "primary": t_primary(key),
        "secondary": t_secondary(key),
    }
